{% extends 'base.html' %}
{% load static %}
{{ form.media }}
{% load crispy_forms_tags %}


{% block content %}
    {% comment %}
<script>
    //this function will be called after the JSME JavaScriptApplet code has been loaded.
    /*function jsmeOnLoad() {
        jsmeApplet = new JSApplet.JSME("jsme_container", "700px", "540px");
        jsmeApplet.setCallBack("AfterStructureModified", setSmiles);
    }*/

    alert('foo');
    var ketcherFrame = document.getElementById('ifKetcher');
    ketcher = ketcherFrame.contentWindow.ketcher;
    ketcher.setCallBack("onchange", setSmiles());


</script>
{% endcomment %}

    {% load crispy_forms_tags %}
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-7 col-sm-6">
            {% crispy form %}
        </div>
    </div>


    <script>
        jQuery(function ($) {
            $('#ketcher-frame').on('load', function () {
                var ketcher = this.contentWindow.ketcher,
                    source = $('#id_sample_name_samp'),
                    show = $('#show');

                ketcher.editor.on('change', function () {
                    //alert('foochange');
                    source.val(ketcher.getMolfile());
                    //source.val($('canvas').data().toString());
                });
            })
        });
    </script>

{% endblock content %}
